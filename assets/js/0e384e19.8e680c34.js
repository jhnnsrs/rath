"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9671],{3905:function(n,t,e){e.d(t,{Zo:function(){return p},kt:function(){return m}});var r=e(67294);function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function i(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function o(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?i(Object(e),!0).forEach((function(t){a(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function s(n,t){if(null==n)return{};var e,r,a=function(n,t){if(null==n)return{};var e,r,a={},i=Object.keys(n);for(r=0;r<i.length;r++)e=i[r],t.indexOf(e)>=0||(a[e]=n[e]);return a}(n,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)e=i[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(a[e]=n[e])}return a}var l=r.createContext({}),c=function(n){var t=r.useContext(l),e=t;return n&&(e="function"==typeof n?n(t):o(o({},t),n)),e},p=function(n){var t=c(n.components);return r.createElement(l.Provider,{value:t},n.children)},u={inlineCode:"code",wrapper:function(n){var t=n.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(n,t){var e=n.components,a=n.mdxType,i=n.originalType,l=n.parentName,p=s(n,["components","mdxType","originalType","parentName"]),h=c(e),m=a,d=h["".concat(l,".").concat(m)]||h[m]||u[m]||i;return e?r.createElement(d,o(o({ref:t},p),{},{components:e})):r.createElement(d,o({ref:t},p))}));function m(n,t){var e=arguments,a=t&&t.mdxType;if("string"==typeof n||a){var i=e.length,o=new Array(i);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=n,s.mdxType="string"==typeof n?n:a,o[1]=s;for(var c=2;c<i;c++)o[c]=e[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,e)}h.displayName="MDXCreateElement"},59881:function(n,t,e){e.r(t),e.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return p},default:function(){return h}});var r=e(87462),a=e(63366),i=(e(67294),e(3905)),o=["components"],s={sidebar_position:1,sidebar_label:"Introduction"},l="Quick Start",c={unversionedId:"intro",id:"intro",title:"Quick Start",description:"Let's discover Rath in less than 5 minutes.",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/rath/docs/intro",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/intro.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Introduction"},sidebar:"tutorialSidebar",next:{title:"Design",permalink:"/rath/docs/links/design"}},p=[{value:"Inspiration",id:"inspiration",children:[],level:3},{value:"Installation",id:"installation",children:[],level:3},{value:"Design",id:"design",children:[],level:3}],u={toc:p};function h(n){var t=n.components,e=(0,a.Z)(n,o);return(0,i.kt)("wrapper",(0,r.Z)({},u,e,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"quick-start"},"Quick Start"),(0,i.kt)("p",null,"Let's discover ",(0,i.kt)("strong",{parentName:"p"},"Rath in less than 5 minutes"),"."),(0,i.kt)("h3",{id:"inspiration"},"Inspiration"),(0,i.kt)("p",null,"Rath is like Apollo, but for python. It adheres to the design principle of Links and enables complex GraphQL\nsetups, like seperation of query and subscription endpoints, dynamic token loading, etc.., but its also super easy to\nconfigure and extendable"),(0,i.kt)("h3",{id:"installation"},"Installation"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pip install rath\n")),(0,i.kt)("h3",{id:"design"},"Design"),(0,i.kt)("p",null,"Rath provides async and sync interfaces to support both programming paradigms, no matter which transport you are using.\nThis allow for example for synchronous iteration of websockets subscriptions. The prefered way of using rath is through\ncontext managers, so that clean up code (like closing websocket connections), can be handled automatically."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'from rath.links.aiohttp import AioHttpLink\nfrom rath import Rath\n\nlink = AioHttpLink(url="https://api.spacex.land/graphql/")\n\n\nrath = Rath(link=link)\n\nwith rath as r\n\n  query = """query TestQuery {\n    capsules {\n      id\n      missions {\n        flight\n      }\n    }\n  }\n  """\n\n  result = r.query(query)\n\n')),(0,i.kt)("p",null,"Subscriptions follow a similar pattern. Just iterate over the results in the subscribe method (actual subscription happens in another thread, so keep alive signals are automatically send). Here the context manager takes care of automatically cleaning up the stateful websocket\nconnection when leaving the context."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'from rath.links.aiohttp import AioHttpLink\nfrom rath.links.websocket import WebsocketLink\nfrom rath import Rath\n\nlink = WebsocketLink(url="...your subscription service ...")\n\n\nrath = Rath(link=link)\n\nwith rath as r\n\n  sub = """subscription NiceEvent {\n    capsules {\n      id\n      missions {\n        flight\n      }\n    }\n  }\n  """\n\n  for event in r.subscribe(sub):\n    print(event)\n\n')),(0,i.kt)("p",null,"If you dont want to use a context manager you can also choose to\nuse the connect/disconnect methods:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'from rath.links.aiohttp import AioHttpLink\nfrom rath import Rath\n\nlink = AioHttpLink(url="https://api.spacex.land/graphql/")\n\n\nrath = Rath(link=link)\nrath.connect()\n\nquery = """query TestQuery {\n  capsules {\n    id\n    missions {\n      flight\n    }\n  }\n}\n"""\n\nresult = rath.query(query)\n\n\n# later\nrath.disconnect()\n\n')),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If you choose this approach, make sure that you call disconnect in your code at some\nstage. Especially when using asynchronous links/transports (supporting subscriptions) in a sync\nenvironment,as only on disconnect we will close the threaded loop that these transports required\nto operate. Otherwise this connection will stay open."))),(0,i.kt)("p",null,"This is the same within an asyncio loop:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'from rath.links.aiohttp import AIOHttpLink\nfrom rath import Rath\nimport asyncio\n\nlink = AioHttpLink(url="https://api.spacex.land/graphql/")\nrath = Rath(link=link)\n\n\nasync def main():\n  async with rath as r:\n\n    query = """query TestQuery {\n      capsules {\n        id\n        missions {\n          flight\n        }\n      }\n    }\n    """\n\n    result = await r.query(query)\n\n\nasyncio.run(main())\n')),(0,i.kt)("p",null,"Likewise for subscriptions"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'from rath.links.aiohttp import AioHttpLink\nfrom rath.links.websocket import WebsocketLink\nfrom rath import Rath\n\nlink = WebsocketLink(url="...your subscription service ...")\n\n\nrath = Rath(link=link)\n\n\nasync def main():\n  async with rath as r\n\n    sub = """subscription NiceEvent {\n      capsules {\n        id\n        missions {\n          flight\n        }\n      }\n    }\n    """\n\n    async for event in r.subscribe(sub):\n      print(event)\n\nasyncio.run(main())\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"In this scenario we are using the asyncio event loop and do not spawn a seperate thread."))))}h.isMDXComponent=!0}}]);